{
  "step_anchor": "#step-5",
  "approach": "Refactor the implementer SKILL.md to replace the .specks/runs/<session-id>/ session model with the worktree-based model. Update setup agent response handling for Spec S06 output. Update all agent Task invocations to include worktree_path. Add PR creation at end via committer-agent publish mode. Remove manual/auto commit policy and Done/Abort prompts.",
  "expected_touch_set": [
    "skills/implementer/SKILL.md"
  ],
  "implementation_steps": [
    {"order": 1, "description": "Update setup agent response handling for Spec S06 (worktree_path, branch_name, base_branch)"},
    {"order": 2, "description": "Replace session directory logic with worktree-based session.json tracking"},
    {"order": 3, "description": "Update all agent Task invocations to include worktree_path"},
    {"order": 4, "description": "Update step artifact storage to worktree-relative paths"},
    {"order": 5, "description": "Add PR creation at end via committer-agent publish mode"},
    {"order": 6, "description": "Update session.json status tracking throughout workflow"},
    {"order": 7, "description": "Remove commit_policy manual/auto logic and Done/Abort prompts"},
    {"order": 8, "description": "Update Session Directory Structure reference section"},
    {"order": 9, "description": "Update Orchestration Loop diagram for worktree flow"},
    {"order": 10, "description": "Update session completion to use publish mode and report PR URL"}
  ],
  "test_plan": "grep -c 'worktree' for multiple matches, grep -c '.specks/runs' should return 0, verify all agent invocations include worktree_path",
  "risks": [
    "Extensive refactoring needed while maintaining coherence",
    "step_summaries must be collected for publish mode",
    "Error handling paths need worktree updates"
  ]
}
